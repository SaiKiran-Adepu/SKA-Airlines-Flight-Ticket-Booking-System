THE SKA AIRLINES VERSIONS AND APPLICATION DEVELOPMENTS âœˆï¸ğŸ› ï¸

SKA Airlines âœˆï¸ Application Changelog ğŸ› ï¸

The latest version is always the newest âœ¨; airline0 is old ğŸ“¦, and airline1 is newer than airline0 ğŸ†•.

For reference, the last version has all the most recent updates â©.

airline3: Up to the index page, changes are applied there ğŸ“„.

airline4: Up to the index page, with updates to ticket_index for guest users ğŸ§‘ğŸ¦±ğŸ‘¤.

The file routes.py manages HTML routes ğŸ“‚, and common .py files are used throughout the website ğŸ’».

Airline v4 ğŸ›©ï¸
Data now retrieves from DB tables in the right places ğŸ“Š, such as routes_html.py inside the needed module.

Progressed up to the airport_fare section ğŸ·ï¸.

Version 7 âœ…
Added plane quota feature ğŸ›¬ when adding a new plane; tracking capacity is much easier now! ğŸ¤“

Version 8 ğŸ”
Implemented new user registration with error flashes ğŸš¦ when users try to register duplicates or refresh the page.

Checked pages for flash messages: Whenever you add things like airports or fares, you get an alert âš ï¸ for duplicates.

If the endpoint is user_register_success.html and the page is reloaded, youâ€™re redirected ğŸ”„ to the homepage with an error, preventing duplicate DB entries ğŸ™…â™‚ï¸.

Version 9 ğŸ§ª
All guest-related index functions completed, with tests ğŸ¯, ticket index, and user feedback included ğŸ’Œ.

If flights for a chosen origin-destination pair donâ€™t exist, thereâ€™s an alert popup ğŸš¨.

Fixed journey date logic ğŸ“…: now the return date can't be before the journey date ğŸ•“.

User-side reservation is paused ğŸ›‘, while admin-side implementation is underway ğŸ› ï¸.

Version 10 ğŸ
Shared data for HTML pages is now passed centrally through Python routes âš™ï¸, no more repetitive transfer.

Fares automatically update â¬†ï¸, and all passenger names are shown in uppercase ğŸ” .

Version 11 ğŸ“±
Admin-side booking features auto-assign seat numbers based on class selection ğŸš¥ by Python codeâ€”all logic, zero SQL!

All tickets and tables now use a responsive design ğŸ“².

Added user number at reservation time; registered users can re-download their ticket from the portal ğŸ”ƒ.

Version 12 ğŸ¯
Refined application responsiveness: focus is now on downloading tickets instead of printing ğŸ–¨ï¸â¡ï¸ğŸ’¾.

UI and fare logic now support roundtrips: base fare is doubled (base_fare*2) â©, and dynamic updates are clearly visible!

Fixed issues with previous double-calculation logic; updates now show live ğŸ”„.

Version 13 ğŸ‘¨ğŸ’¼
Admin entering a username now reveals the user number instantly ğŸ‘€.

Developed almost all admin features, including a robust PNR enquiry/audit system ğŸ” for all bookings.

Admin and user booking histories are linked ğŸ“ˆ; also added textbox for country code when adding new airports ğŸŒ.

Version 14 ğŸ“†
If the journey date is reached, journey status updates to â€œcompletedâ€ automatically âœ….

When booking is "In Progress," the status is set to â€œIPâ€ instantly âš¡.

Cancelled tickets are clearly flagged ğŸš©. Event handlers with SQL keep everything up to date.

Plane schedules are available to all users ğŸ‘¥, and entering a plane number instantly reveals the plane name ğŸ›«.

Version 15 ğŸ“²
Built PNR index module; user index page is now mobile-friendly ğŸ“±.

Plane schedule and PNR index pages are shared between main user and index pages ğŸ”—.

When downloading tickets, each user only sees their ownâ€”privacy protected! ğŸ”’

Version 16 ğŸ¦
Fully developed the Bank Gateway ğŸ’³ integrated with User Ticket Booking ğŸ« with proper logic and data flow.

Implemented up to user ticket download ğŸ’¾.

Version 17 âš ï¸
Added caution alerts ğŸš¨ for users and admin when entering the user name during booking.

Developed User Journey History tracking ğŸ“œ: routes from index -> user_journey_history.py -> user -> user_journey_history_su.html -> user_journey_history1.py -> user_ticket_download_su.html

Used session management to ensure data is accessed only for the particular user ğŸ”’.

Version 18 âŒğŸŸï¸
Developed fully user cancellable tickets with Bank Gateway integration ğŸ”„ğŸ¦.

Reduced separate views for user to download CNF (confirmed) or CAN (canceled) tickets with all journey statuses.

Removed the old ticket download module ğŸ”¥ (no need to enter user PNR again).

Users can select a group of CNF, CAN, or both from the list for easy download ğŸ“¥.

Version 19 ğŸ—£ï¸ğŸ“±
Developed User Feedback module ğŸ“ and enhanced user mobile update ğŸ“².

Version 20 ğŸ”‘ğŸ”„
Developed User Password Update Module ğŸ”.

Improved some code usability and maintainability ğŸ› ï¸.

Version 21 âš ï¸ğŸ§¾
Developed Admin Cancellation Ticket Module ğŸ›‘ but pending payment mode handling.

Problem: Admin booked tickets without bank account details cause issues on cancellation (empty account info).

Planned: Added module to require account number at admin booking or cancellation time (mandatory if digital payments involved) ğŸ’³.

Version 22 ğŸ’¸
Completed Admin side cancellation with payment types: Cash and Digital Payment ğŸ’µğŸ“².

Pending: Dynamic linking of account user number and name.

Version 23 ğŸ§¾ğŸ’»
Developed full Admin cancel ticket module with automatic fetching of user account number and name in Python code ğŸ¤–.

Added JavaScript logic for both user and admin sides to display ticket details dynamically:

For CAN tickets â¡ï¸ show cancellation fare info ğŸ”´

For CNF tickets â¡ï¸ show confirmed details only âœ…

Reduced extra code for cancellation ticket handling ğŸ‰.

Version 24 ğŸ“…ğŸ’»
Developed date handling completely in Python code (not HTML forms) ğŸ“†ğŸ–¥ï¸.

Reduced ticket download modules by unifying CNF and CAN ticket handling using JavaScript visibility toggles (hide empty cancellation details) ğŸ‘»ğŸ‘ï¸.

Enhanced:

Admin side feedback control with deletion on selection ğŸ—‘ï¸

Maintained accurate Airline Fund Details ğŸ’° for SKA Airlines.

Improved code layout and structure for better maintenance ğŸ§¹.

Version 25 ğŸª‘
Focused on seat availability based on user/admin seat selection ğŸŸï¸ğŸ›‹ï¸.

Created seats_avl.py in admin folder, shared with admin, user, and guest.

Used JSON + MySQL join queries for realistic seat booking and layout visualization ğŸ¨.

Version 26 ğŸ”„
Added submodule to check/modify flight search details on the same page ğŸ‘¨ğŸ’»ğŸ‘©ğŸ’» for admin and guest users.

Enables quick rechecking with different plane classes, dates, and fares without page reload ğŸ’¨.

Version 27 ğŸ”¢
Developed seat number auto-allocation based on flight_number, flight_class, with seat resets upon reaching max seats ğŸ”„ seats reset.

Version 28 ğŸ”ğŸª‘
Improved seat allocation trigger considering flight_number, flight_class, and journey date (jd).

Example:

Flight: AA12AA, Class: First, JD: 15/Sep/2024 â†’ Seat: 1A

Flight: AA12AA, Class: First, JD: 16/Sep/2024 â†’ Seat: 1A

Flight: AA12AA, Class: First, JD: 15/Sep/2024 (next seat) â†’ Seat: 1B

Allocation dynamically resets per flight, class, and journey date.

Attempted integration: linked SKA Airlines to SKA Bank at admin ticket booking time only.

User-side ticket booking and cancellation fully linked with bank gateway ğŸ¦.

Admin side ticket cancellation done âœ…, but booking-side bank account detail input is optional.

Fund increments to SKA Airlines bank account (account 106) handled if provided.

Version 29 ğŸ’¾ğŸ”’
Backed up and inserted all transactions into bank-side database with full control and auditing ğŸ”.

Issue noted: Cancelling single passenger tickets works, but multiple passenger reservation ticket cancellations fail â—.

Version 30 ğŸš€ğŸ”¥ (Most Important Version!)
Solved all previous issues; implemented correct seat allocation trigger for cancelled seats â†’ seats freed up as available based on flight number, journey date, and flight class ğŸª‘âœ….

Fixed issue where only single tickets could be cancelled, now multiple ticket cancellations work smoothly ğŸ‰.

Bug fix: replaced cursor.fetchone() with cursor.fetchall() for multiple records handling ğŸ›ğŸ.

Added "Number of Passengers" display in public PNR status ğŸ§‘ğŸ¤ğŸ§‘.

Fixed user journey history to accurately show confirmed, canceled, and all statuses ğŸ“œ.

Removed problematic submodule showing user numbers on admin side during booking â€” avoiding counter ticket confusion ğŸš«.

Implemented counter ticket cancellation logic: tickets booked by admin must be cancelled only on admin side as counter tickets âš ï¸.

Added "All rights reserved" notices on specified pages Â©ï¸.

----------------------------------------------------------------------------------------------------------------------------------------------------

âœ… PHASE 1: Previously Completed Modules (Theoretical Summary) ğŸš€âœˆï¸

1. Multi-Step Ticket Booking System ğŸ›«ğŸ›¬ (Admin & User Side)
Goal: Seamlessly streamline flight ticket booking across multiple pages for a smooth user experience.

ticket_admin1.html âœˆï¸: Captures initial booking inputs like flight number, origin ğŸ™ï¸, destination ğŸŒ, and dates ğŸ“….

ticket_admin2.html ğŸŸï¸: Selects travel class (Economy, Business), quota type ğŸ« (e.g., Senior, Student), trip type (One-way/Round-trip ğŸ”„), and number of passengers ğŸ‘¨ğŸ‘©ğŸ‘¦ğŸ‘¦.

ticket_admin3.html ğŸ‘¤: Collects passenger details â€” name, age ğŸ‚, gender ğŸš», and more.

ticket_admin_final.html ğŸ“‹: Displays a comprehensive booking summary for final confirmation âœ”ï¸.

Note: Sessions ğŸ”„ seamlessly carry data across pages, ensuring no details are lost during the booking flow!

2. Fare Calculation System ğŸ’¸ğŸ§®
Goal: Dynamically calculate ticket fares based on smart business logic.

Base Fare: Standard flight fare ğŸ«.

Class Fare: Additional charge based on travel class ğŸ›ï¸ (e.g., Economy, Business).

Quota Discounts: Special discounts ğŸ·ï¸ for categories like seniors ğŸ‘µ, students ğŸ“.

Trip Discounts: Extra savings for round trips ğŸ”„.

Real-time fare updates powered by JavaScript âš¡ keep passengers informed as they add travelers or change selections â€” no page reloads needed!

3. Seat Allocation Logic ğŸª‘âœ¨
Goal: Automate seat assignment for every booking to maximize efficiency.

Seats stored in airline_sitting table ğŸ“Š, e.g., First Class seats from 1A to 3D.

Seats are assigned sequentially ğŸ¯, looping or managing overflow smoothly when full.

Candidate for implementation via SQL triggers ğŸ—ƒï¸ or Python logic ğŸ â€” both approaches explored depending on scalability & flexibility needs.

4. Ticket Cancellation Logic ğŸ”„âŒ (User/Admin)
Goal: Enable smooth ticket cancellation, seat freeing, and refund processing.

Cancellation forms available for both admin and users ğŸ§‘ğŸ’¼ğŸ‘¤.

Upon cancellation:

Updates the reservationâ€™s status field ğŸš¦ (e.g., canceled).

Calculates and processes refund amount refund_Rs ğŸ’°.

Frees or flags the seat in the airline_sitting table for reuse â™»ï¸.

-----------------------------------------------------------------------------------------------------------------------------------------------------

THE PHASE 2


âœ… Phase 1 Recap â€” Locked & Completed
These are already implemented, tested, and finalized:

âœ”ï¸ Feature	Details
Multi-Step Ticket Booking	Admin + User Booking Flow
Dynamic Fare Calculation (JS)	Class, Quota, Trip Mode based
Round Trip Fare Logic	Fare doubling + Return Date check
Seat Allocation Trigger	CNF/Seat assignment via Trigger
Seat Reuse Logic	Based on Flight No + JD/RD
Ticket Cancellation + Refund	Refund logic based on status/date
PDF Ticket + Cancel PDF	Using reportlab or fpdf
Admin Dashboard (Text)	CRUD, Search, Manage
Passenger Manifest	Based on PNR & Flight filter
Payment Simulation (Manual)	Form input only


-----------------------------------------------------------------------------------------------------------------------------------------------

ğŸš€ PHASE 2 DEVELOPMENT PLAN
Unleashing dynamic, modern features for SKA Airlines! âœ¨

1. ğŸ§¾ QR Code Integration in Ticket PDFs
Purpose: Fast airport check-in & digital ticket verificationâ€”COMPLETED âœ…

pip install qrcode[pil]           # QR Code generation

Libraries Used: qrcode, base64, reportlab/fpdf

QR Code Data Example:

json
{
  "PNR": "12345",
  "Passenger": "John Doe",
  "Flight No": "AI-202",
  "Seat": "2A",
  "Date": "2025-07-21"
}
Workflow:
Generate QR Code â†’ Base64 encode â†’ Embed in ticket PDF
Optionally preview QR in HTML before download ğŸ‘€

2. ğŸ“§ Email Notification System
Purpose: Instantly update users via email on bookings and cancellations âœ‰ï¸ğŸ“¤

When to Send:

On Booking âœ… (attach PDF ticket)

On Cancellation âŒ (with refund details or summary)

https://myaccount.google.com/apppasswords to Generate the app password to use in the email system


Libraries & Install Commands:

text
pip install Flask flask-mail reportlab
Email Package: Flask-Mail (SMTP-based)

Session Management:

text
pip install Flask-Session
python
from flask_session import Session
app.config['SESSION_TYPE'] = 'filesystem'  # Or use 'redis', 'sqlalchemy'
Session(app)
To Do:

Configure mail server and authentication ğŸ”‘

Trigger email on ticket booking/cancellation events ğŸ“¬

3. ğŸ’³ QR Code Payment Gateway (Simulated)
Purpose: Simulate secure payments with QR before final booking ğŸ’°

Sample QR Payment Data:

json
{
  "Amount": 5600,
  "Reference": "PNR-12345",
  "Payee": "SKA Airlines",
  "Timestamp": "2025-07-08 11:23:12"
}
Steps:

Show payment QR on page

Simulate â€œPayment Doneâ€ â†’ Confirm booking

4. ğŸ“Š Graphical Admin Dashboard
Purpose: Bring insights to life with eye-catching visuals! ğŸ“ˆ

Key Charts:

Bookings per Day ğŸ“…

Revenue per Flight/Class ğŸ’¸

Cancellation vs Confirmed Trends ğŸ“Š

Libraries:

Frontend: Chart.js, Plotly.js

Backend: Flask serves JSON endpoints

To Do:

Dashboard HTML

AJAX endpoints for live data

Note: Reservation funds visualization already implemented âœ…

5. ğŸª„ Advanced Seat Allocation by Flight Type
Purpose: Automatically manage seat allocation by aircraft type ğŸš¦

Features:

Flight types (Boeing, Airbus) + seat range config for FC, BC, PECO, ECO

Auto-assign seats according to chosen flight type âœˆï¸

Implementation:

Add flight_type field in flights table

On selecting flight, auto-populate seat/class limits (JS or backend)

To Do:

Module: flight_type_seats.py

Embed logic in JS/frontend or backend

6. ğŸ› ï¸ Common DB Configuration File
Purpose: Centralized & secure database connection ğŸ”

File: db_config.py

python
import mysql.connector
def get_connection():
    return mysql.connector.connect(
        host='localhost',
        user='root',
        password='tiger',
        database='airline'
    )
Usage:

python
from db_config import get_connection
Status: DONE âœ…

7. ğŸ” Dynamic Fare Calculation (From DB)
Purpose: No more hardcoded faresâ€”fetch dynamically from DB ğŸ“‚

Current: Static fare in HTMLâ€”OUTDATED ğŸš«

New: Calculate on backend from class, quota, base fare, origin, destination, distance

To Do:

Revise DB schema if needed

Implement logic to fetch accurate fare on every booking

Status: Successfully implemented! ğŸ‰

8. ğŸ§® Admin Fare Update & Visualization
Purpose: Equip admin with powerful fare editing & analysis tools! ğŸ› ï¸

Features:

Form-based UI: edit fares for class/km/origin-destination

Optional: auto-calculate fare increases by percentage

Action Items:

Fetch/update from fare_config table

Build responsive admin HTML page

9. ğŸŒ Dynamic IP Address / Domain Binding
Purpose: Make SKA Airlines accessible by domain name instead of raw IP ğŸ“²

Outcome: Users can reach the app at https://ska-airlines.com vs. http://xxx.xxx.xxx.xxx

Status: DONE âœ…

10. â° Enhanced Time Logic (Optional Future Step)
Purpose: Add robust Departure/Arrival Time management in booking system ğŸ•°ï¸

Whatâ€™s Next?

Integrate time pickers in booking UI

Use backend logic to ensure valid, timezone-aware times


Installations Required 

pip install qrcode[pil]           # QR Code generation
pip install Flask flask-mail      # Email sending
pip install Flask-Session         # Session management
pip install reportlab             # PDF generation
pip install mysql-connector-python
pip install mysql-connector-python  # MySQL database connector

ğŸ”¥ VERSION 31
Implemented fully importable QR code generation on tickets ğŸŸï¸âœ¨

Developed seamless ticket layouts integrating dynamic QR codes for fast scanning and verification.

Made the code modular and reusable wherever needed. ğŸ§©âœ…

ğŸš€ VERSION 32
Centralized Database Access Created ğŸ—„ï¸ğŸ”‘

Developed a unified DB connection module for consistent and easy import across all Python programs.

Simplified database handling and improved maintainability. ğŸ’»ğŸ”§

ğŸ’³ VERSION 33
Introduced Advanced Payment via QR Code on Payment Gateway âš¡ğŸ›¡ï¸

Integrated complex payment workflow involving three bank-side JSP programs:

uselqr.jsp, qr_codeaccept.jsp, authorize_payment.jsp

These communicate with our Flask backend via IP and port. ğŸŒğŸ”Œ

Created new transaction table under airlines DB to capture txn_id and validate payment status dynamically. ğŸ’¾âœ”ï¸

Pending: Full ACID-compliant payment method processing under payment modules. ğŸ”œğŸ› ï¸

ğŸ” VERSION 34
Dynamic Fare Calculation from DB Implemented ğŸ“ŠğŸ’°

Replaced static HTML fares with dynamic backend logic fetching from airline_class_quota_fares table.

Fare calculation now smartly considers:

Origin & Destination âœˆï¸

Travel Class & Quota ğŸ«

Distance ğŸ›£ï¸

Flight base fare adjusted by flight priority for speciality flights ğŸš€

Timestamp auto-update added for auditing in airlines_users:

sql
ALTER TABLE airlines_users
MODIFY COLUMN DOR TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
ğŸ“§ VERSION 35
User-Side Email System Launched for Ticket Booking & Cancellation ğŸ’Œâœ…

Sent professional, grammatically polished emails for both confirmed (CNF) and cancelled (CAN) bookings.

Corrected ticket cancellation info wording on printed tickets for clarity and professionalism. ğŸ“ğŸŸï¸

âœ‰ï¸ VERSION 36
Enhanced Email Logic to Avoid Duplicate Sends on Refresh ğŸ”„ğŸš«

Prevented repeated emails on accidental browser refresh during booking or cancellation.

Fixed unknown error page on user ticket cancellation related to refunds.

Positioned email dispatch before ticket_su and ticket_can_su methods in ticket_userdb.py and user_can_ticket2.py.

Admin Side Improvements:

Added extra email field in admin booking for capturing user emails. ğŸ“©

Fetches & uses user email during admin cancellations for realistic communication. âœ”ï¸

Overall: Nearly all application issues resolved; future updates will focus on minor fixes and optimizations. ğŸ› ï¸ğŸ‰

ğŸ› ï¸ VERSION 37
Fixed User Ticket Journey History Display on Cancellations ğŸ“œâŒ

Ensured cancelled tickets properly reflect in user journey history with clear status messages. âœ…

Skipping detailed notes on Version 37 to proceed to next significant update.

ğŸŒŸ VERSION 38
Highly Dynamic Seat Allocation Based on Flight Number, Class, Journey Date & Flight Type ğŸª‘ğŸ”¥

Introduced flight types (e.g., Boeing, Airbus) selectable by admin during flight creation, saved in flights table. ğŸ“‹âœˆï¸

Advanced seat allocation logic extended to respect flight type-specific seat layouts.

Frontend restricts seat selection flow based on chosen flight type for accurate bookings. ğŸ¯

Modified airline_sitting table: added flight_type column for seat trigger logic consistency. ğŸ—ƒï¸

Print & Display:

Tickets now show Flight Type info along with flight charges for transparency. ğŸ«ğŸ’¡

Seat Availability Logic Improved:

seats_avl.py updated for robust seat availability checks â€” correctly handling switched origins and destinations. ğŸ”„ğŸ›‹ï¸

Example:

Flight AA12AA, Class: First, Total Seats: 12

Origin: Hyderabad, Destination: New York, Date: 01/Aug/2025

Booking status now accurately reflects seat availabilityâ€”even if origin/destination are swapped.

Technical Enhancements:

Refined MySQL query logic in seat availability module for precision and error-free operation. ğŸ”ğŸ’¾

Entire codebase polished and structured for maximum robustness and dynamic behavior. âœ…ğŸ

This version represents a major milestone with zero errors, seamless integrations, and enhanced user/admin experience! ğŸš€ğŸ‘


  -------------------------------------------- End of Changelog ----------------------------------------------------------------------

---------------------------------------------------------------------------------------------------------------------------------------------


ğŸš€ Feature Developments
Develop a comprehensive module to display all admin operations, including charges and flight types (flight type display is optional). ğŸ§‘ğŸ’¼ğŸ’»

Fetch flight types dynamically from the database tables during the adminâ€™s flight addition process for seamless, flexible handling. ğŸ›©ï¸ğŸ“Š

Manage and configure flight layouts using data from the seats_avl.py module linked with the flight layout database table. ğŸª‘ğŸ“…

Implement and maintain accurate flight timings for departure and arrival schedules. â°âœˆï¸

(Optional) Integrate the user-side payment gateway with payment_mode=ACID support to allow robust, transactional payment processing. ğŸ’³ğŸ”






